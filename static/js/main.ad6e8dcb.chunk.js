(this["webpackJsonplivekit-recorder-web"]=this["webpackJsonplivekit-recorder-web"]||[]).push([[0],{130:function(e,t,r){},132:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),a=r(49),c=r.n(a),s=(r(80),r(81),r(50)),o=r(4),d=(r(82),r(52)),l=r(1),j=r(18);function u(e){e.participants.size>0?g():e.once(l.RoomEvent.ParticipantConnected,g),e.on(l.RoomEvent.ParticipantDisconnected,(function(){return function(e){0===e.participants.size&&h()}(e)}))}function h(){console.log("END_RECORDING")}function g(){console.log("START_RECORDING")}function p(){var e,t,r=new URLSearchParams(Object(o.f)().search);return{url:null!==(e=r.get("url"))&&void 0!==e?e:void 0,token:null!==(t=r.get("token"))&&void 0!==t?t:void 0}}var x=r(21),f=r.n(x),v=r(2);function b(e){var t=e.interfaceStyle,r=p(),i=r.url,n=r.token;if(!i||!n)return Object(v.jsx)("div",{className:"error",children:"missing required params url and token"});var a="roomContainer";return t&&(a+=" ".concat(t)),Object(v.jsx)("div",{className:a,children:Object(v.jsx)(j.b,{url:i,token:n,onConnected:u,onLeave:h,stageRenderer:O,adaptiveVideo:!0})})}var O=function(e){var t=e.roomState,r=t.error,a=t.room,c=t.participants,s=t.audioTracks,o=n.a.useState([]),u=Object(d.a)(o,2),h=u[0],g=u[1],p=n.a.useState(f.a.grid1x1),x=Object(d.a)(p,2),b=x[0],O=x[1];if(Object(i.useEffect)((function(){var e=[];h.forEach((function(t){(null===a||void 0===a?void 0:a.participants.has(t.sid))&&e.push(t)})),null===a||void 0===a||a.activeSpeakers.forEach((function(t){e.includes(t)||t instanceof l.LocalParticipant||e.unshift(t)}));for(var t=0;t<c.length;t+=1){var r=c[t];if(r instanceof l.RemoteParticipant&&!e.includes(r)&&e.push(c[t]),e.length>9)return}e.length>=9?(O(f.a.grid3x3),e.splice(9,e.length-9)):e.length>=6?O(f.a.grid3x3):e.length>=4?(O(f.a.grid2x2),e.splice(4,e.length-4)):3===e.length?O(f.a.grid2x2):2===e.length?O(f.a.grid2x1):1===e.length&&O(f.a.grid1x1),g(e)}),[c]),r)return Object(v.jsx)("div",{className:"error",children:r});if(!a)return Object(v.jsx)("div",{children:"room closed"});if(0===h.length)return Object(v.jsx)("div",{});var m=s.map((function(e){return Object(v.jsx)(j.a,{track:e,isLocal:!1},e.sid)}));return Object(v.jsxs)("div",{className:"".concat(f.a.stage," ").concat(b),children:[h.map((function(e){return Object(v.jsx)(j.c,{participant:e,orientation:"landscape",width:"100%",height:"100%",adaptiveVideo:!0},e.identity)})),m]})};function m(){return Object(v.jsx)("div",{})}var k=r(35),_=r.n(k);function S(e){var t=e.interfaceStyle,r=p(),i=r.url,n=r.token;if(!i||!n)return Object(v.jsx)("div",{className:"error",children:"missing required params url and token"});var a="roomContainer";return t&&(a+=" ".concat(t)),Object(v.jsx)("div",{className:a,children:Object(v.jsx)(j.b,{url:i,token:n,onConnected:u,onLeave:h,stageRenderer:N,adaptiveVideo:!0})})}var N=function(e){var t,r=e.roomState,i=r.error,n=r.room,a=r.participants,c=r.audioTracks;if(i)return Object(v.jsx)("div",{className:"error",children:i.message});if(!n)return Object(v.jsx)("div",{children:"room closed"});var s=a.filter((function(e){return e instanceof l.RemoteParticipant}));if(s.forEach((function(e){e.videoTracks.forEach((function(e){"screen"===e.trackName&&e.track&&(t=e.track)}))})),0===s.length)return Object(v.jsx)("div",{});var o,d,u=c.map((function(e){return Object(v.jsx)(j.a,{track:e,isLocal:!1},e.sid)}));return 0!==s.length||t?(t?(o=s,d=Object(v.jsx)(j.d,{track:t,height:"100%",width:"100%"})):(o=s.slice(1),d=Object(v.jsx)(j.c,{participant:s[0],width:"100%",height:"100%",orientation:"landscape",quality:l.VideoQuality.HIGH},s[0].identity)),Object(v.jsxs)("div",{className:_.a.stage,children:[Object(v.jsx)("div",{className:_.a.stageCenter,children:d}),Object(v.jsx)("div",{className:_.a.stageSidebar,children:o.map((function(e){return Object(v.jsx)(j.c,{participant:e,width:"100%",height:"100%",orientation:"landscape",adaptiveVideo:!0},e.identity)}))}),u]})):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(j.c,{participant:s[0],width:"100%",height:"100%",orientation:"landscape"}),u]})};var P=function(){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)(s.a,{children:Object(v.jsxs)(o.c,{children:[Object(v.jsx)(o.a,{path:"/speaker-light",children:Object(v.jsx)(S,{interfaceStyle:"light"})}),Object(v.jsx)(o.a,{path:"/speaker-dark",children:Object(v.jsx)(S,{interfaceStyle:"dark"})}),Object(v.jsx)(o.a,{path:"/grid-light",children:Object(v.jsx)(b,{interfaceStyle:"light"})}),Object(v.jsx)(o.a,{path:"/grid-dark",children:Object(v.jsx)(b,{interfaceStyle:"dark"})}),Object(v.jsx)(o.a,{path:"/",component:m})]})})})};r(130);c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root"))},21:function(e,t,r){e.exports={stage:"GridPage_stage__W5woq",grid1x1:"GridPage_grid1x1__wL8ic",grid2x1:"GridPage_grid2x1__VdVVI",grid2x2:"GridPage_grid2x2__Bv9yw",grid3x3:"GridPage_grid3x3__1nRGi"}},35:function(e,t,r){e.exports={stage:"SpeakerPage_stage__1bMqb",stageCenter:"SpeakerPage_stageCenter__3CGET",stageSidebar:"SpeakerPage_stageSidebar__3lTj4"}},82:function(e,t,r){}},[[132,1,2]]]);
//# sourceMappingURL=main.ad6e8dcb.chunk.js.map